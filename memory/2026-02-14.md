# 2026-02-14 — Day 2: The Dominion Goes Live

## Completed Today
- Phase 1, 2, 3 ALL complete — all 7 generals configured
- Castle Throne Room: HD-2D environment with dynamic lighting, 62 particles, stained glass
- Octopath-quality sprites: 64x64, 5-shade depth, 6 animation states each
- Admin Command Center + Quest Log pages
- MAMMON + WRAITH-EYE task templates
- 7 multi-general mission templates
- THRONE heartbeat integration (real orchestration logic)
- SSE real-time streaming backend
- Cron jobs set: daily briefing (08:00 WIB), weekly security (Mon), weekly finance (Fri)
- First live SEER spawn attempted — hit rate limit (too much building)

## System Architecture
- Frontend: 9 routes (dashboard, throne-room, generals, missions, roundtable, cost, admin, logs, not-found)
- Backend API: Express + PostgreSQL, 7 route modules + SSE streaming
- Database: 13 tables + 3 views on Railway PostgreSQL
- All deployed on Railway project "handsome-mercy"

## Rate Limit Issue
- Hit Claude Max plan rate limit during heavy building
- SEER spawn failed with 429 errors
- Need to pace sub-agent spawns, wait for cooldown

## Total Code Written
- ~18,000+ lines across 80+ files in 2 days
- Frontend, backend, database, orchestrator, sprites, throne integration

## URLs
- Frontend: dominion-frontend-production.up.railway.app
- API: dominion-api-production.up.railway.app
- GitHub: github.com/zexoverz/dominion

## Cron Jobs Set
- dominion-daily-briefing: 01:00 UTC daily (08:00 WIB)
- dominion-weekly-security-sweep: Monday 02:00 UTC (09:00 WIB)
- dominion-weekly-finance-report: Friday 10:00 UTC (17:00 WIB)

## First Live SEER Mission ✅
- Mission: Bitcoin DeFi Landscape Analysis Q1 2026
- First attempt failed (rate limit from too many sub-agents)
- Retry on Sonnet succeeded
- Key findings: BTCfi TVL 10x growth, Citrea ZK-rollup = GrimSwap synergy, Stacks sBTC needs better DEXs
- Mission logged as completed in API
- Report saved to /data/workspace/seer-btc-defi-q1-2026.md

## Lessons Learned
- Don't spawn 6+ sub-agents rapidly — causes rate limits
- Always use Sonnet for sub-agent spawns (lower rate limits)
- Keep Opus only for direct THRONE↔Faisal conversations
- devDependencies don't install on Railway — put build tools in regular deps
- Railway API tokens shown in list are token IDs, not the actual token values
- `CREATE INDEX CONCURRENTLY` can't run in transactions
- MySQL-style `INDEX()` inside CREATE TABLE doesn't work in PostgreSQL

## Faisal's Preferences (Design)
- Wants pixel art RPG aesthetic (SNES/GBA style) — NOT cyberpunk
- Wants Octopath Traveler level sprite quality
- Wants real character designs with bodies, not just icons
- Wants real-time animations showing agent work
- Wants castle room as "AI office" to see agents working
- Mobile-friendly is important

## Async Work Plan (Faisal out ~11:15 WIB)
- [ ] Verify frontend deploy is live with real API data
- [ ] Set up THRONE heartbeat cron for autonomous ops
- [ ] Wire real agent activity to dashboard/throne room
- [ ] Daily briefing system (auto Telegram)
- [ ] NEW RULE: Always test API responses before shipping frontend changes
- Faisal confirmed v2.0 investment master plan is source of truth
- Faisal deploying full war chest (BTC at -45% from ATH, past -30% and -40% triggers)
- Investment master plan saved locally at dominion/reports/investment-masterplan-v2.md

## Work Log (async while Faisal is out)
- 04:15 UTC: Verified all 7 API endpoints return real data (7 generals, 4 missions, 4 proposals, 9 events, costs, 2 roundtables, 21 relationships)
- 04:15 UTC: Frontend JS bundles still have old build (missing /api/ prefix) — Railway rebuild triggered via `railway up --detach`
- 04:18 UTC: Cron job scheduled to verify deploy at 04:35 UTC
- 04:18 UTC: Created heartbeat-state.json
- Bug found: lib/api.ts paths missing /api/ prefix + mission status values mismatch (IN_PROGRESS vs active)
- Rule added: ALWAYS test API responses in built JS before declaring frontend fixed
- 04:36 UTC: Cron deploy-check ran — confirmed buildId unchanged, old build still live
- 04:37 UTC: Root cause found — no .dockerignore, Railway Docker cache not invalidating
- 04:38 UTC: Added .dockerignore (excludes node_modules, .next, .git), triggered new build e75cfa66
- Cron jobs cleaned up: removed duplicates, now 3 recurring (daily briefing, weekly security, weekly finance) + morning checkpoint
